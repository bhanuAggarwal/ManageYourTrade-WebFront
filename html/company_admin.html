<html>
	<head>
		<title>Company Admin</title>
		<link rel="stylesheet" type="text/css" href="../css/main.css">
		<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
	</head>
	<body>
	<div class="container-fluid">
		<div style="background-color:#009688;padding:10px; height:30vh" class="row">
			<p style="font-size:46px;color:white" align="center">
				WELCOME TO MYT
			</p>
			<div>
				<button id="logout" class="btn btn-default col-md-offset-11 col-md-1" >LOGOUT</button>
				<div id="nav"></div>
			</div>
		</div>
	<div class="row">
		 <div id="list" class="col-md-6" style="height:70vh; overflow-y: scroll">
		 	<div class="col-md-6" align="center">
				<div id="add_rm_button" class="circular_add col-md-offset-1"></div>
				<div class="contents">Add New RM</div>
			</div>
		 </div>
		<div class="col-md-6" id="fright" style="height:70vh">
				<div class="circular" align="center" style="display:block;margin:0 auto">
					
				</div>
				<h1 align="center"> Vikram Batra </h1>
				<h2 class="content_head"> Email: </h2> 
				<h3 class="content_head"> vikrambatra@gmail.com </h3>
				<br/><br/>
				<h2 class="content_head"> Phone no: </h2>
				<h3 class="content_head"> 9876543219 </h3>
				<br/><br/>
				<h2 class="content_head"> Company: </h2>
				<h3 class="content_head"> Manage Your Trade </h3>

		</div>
	</div>
	<div style="display:none;" align="center" id="popup">
	<form align="center">
	    </br>
	    <img src="close.png"/>
		<input id="name" type="text" placeholder="name" style="height:40px;width:286px;font-size: 22px;background-color:#009688"></br></br>
		<input id="email" type="text" placeholder="email" style="height:40px;width:286px;font-size: 22px;background-color:#009688"></br></br>
		<input id="phone number" type="text" placeholder="phone number" style="height:40px;width:286px;font-size: 22px;background-color:#009688"></br></br>
		<input id="password" type="text" placeholder="password" style="height:40px;width:286px;font-size: 22px;background-color:#009688"></br></br>
		<button id="login" type="submit" style="height:40px;width:286px">CREATE</button>
	</form>
	</div>
	</body>
	<script type="text/javascript" src="../js/jquery.js"></script>
	<script language="javascript" type="text/javascript">
	  	var rm_list, am_list, tsi_list, dealer_list;
		$(document).ready(function() {
		    $("#logout").click(function(){
		    	$.get("http://localhost:8080/myt-services/admin/logout",function(data){
		   		alert(data.message);
		   			if(data.id == 1){
		   				window.location.href = "../index.html";
		   				return false;
		   			}
		   			else{
		   				alert(data.message);
		   			}
		    	});
		    }); 

		    $("#add_rm_button").click(function(){
	   				 document.getElementById("fright").innerHTML='<object type="text/html" height="100%" width="100%" data="http://localhost:8080/myt-admin/html/add_rm.html" ></object>';

		    }); 

		    $("#add_new").click(function(){
	           $("#container").css('opacity','0.4');
	           $('#popup').css('display','block');
	         });
		    });
			$.ajax({
				type		: "GET",
				url 		: "http://localhost:8080/myt-services/admin/rm",
				contentType	: "application/json",
				success		: function(data){
								rm_list = data;
								for(var i = 0; i < data.length; i++) {
									
									var list = '<div onClick= "showAM('+i+')"class="col-md-6" align="center"> <div class="circular" style="background:url('+ data[i].profile_pic +') center"> </div><div class="contents" align="center"><span>'+ data[i].name+'('+data[i].designation+')</span><br/><span>'+ data[i].area+'</span></div></div>';
									list.onClick = function(){
										console.log(data[i]);	
										showAM(data[i]);
									};
									$('#list').append(list);
							}	
				} 
			});

			function showAM(index){
				$("#nav").append("<div id='rm_nav' class='col-md-1' align='center' onClick='showRM()' style='z-index:100000'>"+rm_list[index].name + " ("+rm_list[index].designation+")(" + rm_list[index].area + ")</div>");
				$("#list").html('<div class="col-md-6" align="center">'
								+	'<div id="add_am_button" class="circular_add col-md-offset-1"></div>'
								+	'<div class="contents">Add New AM</div>'
								+	'</div>');

				$("#add_am_button").click(function(){
	   				 document.getElementById("fright").innerHTML='<object type="text/html" height="100%" width="100%" data="http://localhost:8080/myt-admin/html/add_am.html" ></object>';
		    	});

				$.ajax({
					type		: "GET",
					url 		: "http://localhost:8080/myt-services/admin/am?rm_id=" + rm_list[index].id,
					contentType	: "application/json",
					success		: function(data){
									am_list = data;
									for(var i = 0; i < data.length; i++) {
										$('#list').append('<div onClick="showTSI('+i+')" class="col-md-6" align="center"> <div class="circular" style="background:url('+ data[i].profile_pic +') center"> </div><div class="contents" align="center"><span> Name : '+ data[i].name +'</span><br/><span> Area : '+ data[i].area +'</span></div></div>');
								}
					} 
				});
			}

			function showRM(){
				console.log("Hello");
				$("#nav").html('');
				$("#list").html('<div class="col-md-6" align="center">'
								+	'<div id="add_rm_button" class="circular_add col-md-offset-1"></div>'
								+	'<div class="contents">Add New RM</div>'
								+	'</div>');

				$("#add_rm_button").click(function(){
	   				 document.getElementById("fright").innerHTML='<object type="text/html" height="100%" width="100%" data="http://localhost:8080/myt-admin/html/add_rm.html" ></object>';
		    	});

				for(var i = 0; i < rm_list.length; i++) {
					var list = '<div onClick= "showAM('+i+')"class="col-md-6" align="center"> <div class="circular" style="background:url('+ rm_list[i].profile_pic +') center"> </div><div class="contents" align="center"><span> Name : '+ rm_list[i].name+'</span><br/><span> Area : '+ rm_list[i].area+'</span></div></div>';
					$('#list').append(list);
				}	
			} 

			function showTSI(index){
				$("#nav").append("<div id='tsi_nav' class='col-md-1' align='center' onClick='showAMBack()' style='z-index:100000'>"+am_list[index].name + " (" + am_list[index].area + ")</div>");
				$("#list").html('<div class="col-md-6" align="center">'
								+	'<div id="add_tsi_button" class="circular_add col-md-offset-1"></div>'
								+	'<div class="contents">Add New TSI</div>'
								+	'</div>');

				$("#add_tsi_button").click(function(){
	   				 document.getElementById("fright").innerHTML='<object type="text/html" height="100%" width="100%" data="http://localhost:8080/myt-admin/html/add_tsi.html" ></object>';
		    	});

				$.ajax({
					type		: "GET",
					url 		: "http://localhost:8080/myt-services/admin/tsi?am_id=" + am_list[index].id,
					contentType	: "application/json",
					success		: function(data){
									tsi_list = data;
									for(var i = 0; i < data.length; i++) {
										$('#list').append('<div onClick="showDealer('+i+')" class="col-md-6" align="center"> <div class="circular" style="background:url('+ data[i].profile_pic +') center"> </div><div class="contents" align="center"><span> Name : '+ data[i].name +'</span><br/><span> Area : '+ data[i].area +'</span></div></div>');
								}
					} 
				});
			}
			function showAMBack(){
				console.log("Hello");
				$("#am_nav").remove();
				$("#list").html('<div class="col-md-6" align="center">'
								+	'<div class="circular_add col-md-offset-1"></div>'
								+	'<div class="contents">Add New AM</div>'
								+	'</div>');
				for(var i = 0; i < am_list.length; i++) {
					var list = '<div onClick= "showTSI('+i+')"class="col-md-6" align="center"> <div class="circular" style="background:url('+ am_list[i].profile_pic +') center"> </div><div class="contents" align="center"><span> Name : '+ am_list[i].name+'</span><br/><span> Area : '+ am_list[i].area+'</span></div></div>';
					$('#list').append(list);
				}	
			}

			function showDealer(index){
				$("#nav").append("<div id='am_nav' class='col-md-1' align='center' onClick='showTSIBack()' style='z-index:100000'>"+tsi_list[index].name + " (" + tsi_list[index].area + ")</div>");
				$("#list").html('<div class="col-md-6" align="center">'
								+	'<div id="add_dealer_button" class="circular_add col-md-offset-1"></div>'
								+	'<div class="contents">Add New Dealer</div>'
								+	'</div>');

				$("#add_dealer_button").click(function(){
	   				 document.getElementById("fright").innerHTML='<object type="text/html" height="100%" width="100%" data="http://localhost:8080/myt-admin/html/add_dealer.html" ></object>';
		    	});

				$.ajax({
					type		: "GET",
					url 		: "http://localhost:8080/myt-services/admin/dealer?tsi_id=" + tsi_list[index].id,
					contentType	: "application/json",
					success		: function(data){
									dealer_list = data;
									for(var i = 0; i < data.length; i++) {
										$('#list').append('<div class="col-md-6" align="center"> <div class="circular" style="background:url('+ data[i].profile_pic +') center"> </div><div class="contents" align="center"><span> Name : '+ data[i].name +'</span></div></div>');
								}
					} 
				});
			}
	</script>
</html>